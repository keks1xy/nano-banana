<!doctype html>
<html>
<head>
  <title>Nano Banana</title>
</head>
<body>
  <h1>Nano Banana üçå</h1>

  <form method="post">
    <input name="prompt" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç" style="width:300px">
    <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
  </form>

{% if status %}
<p><b>–°—Ç–∞—Ç—É—Å:</b> <span id="status">
  {% if status == "queued" %}
    –≤ –æ—á–µ—Ä–µ–¥–∏ ‚è≥
  {% elif status == "processing" %}
    –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ ‚öôÔ∏è
  {% elif status == "done" %}
    –≥–æ—Ç–æ–≤–æ ‚úÖ
  {% endif %}
</span></p>
{% endif %}




{% if job_id %}
<script>
  const jobId = "{{ job_id }}";

  async function checkStatus() {
    const res = await fetch(`/status/${jobId}`);
    const data = await res.json();

    const statusEl = document.getElementById("status");
    if (!statusEl) return;

    if (data.status === "queued") {
      statusEl.innerText = "–≤ –æ—á–µ—Ä–µ–¥–∏ üïí";
    } else if (data.status === "processing") {
      statusEl.innerText = "–≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ ‚öôÔ∏è";
    } else if (data.status === "done") {
      statusEl.innerText = "–≥–æ—Ç–æ–≤–æ ‚úÖ";
      return; // –ø–µ—Ä–µ—Å—Ç–∞—ë–º –æ–ø—Ä–∞—à–∏–≤–∞—Ç—å
    }

    setTimeout(checkStatus, 1000);
  }

  checkStatus();
</script>
{% endif %}
</body>
</html>
